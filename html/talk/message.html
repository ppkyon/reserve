{% load static %}
{% load humanize %}
{% load original %}

<div class="message-area position-relative">
    <div class="content-area ps-3 pe-3 mb-2">
        {% variable '' as last_send_date %}
        {% for line_message_item in line_message %}
            {% if last_send_date != line_message_item.send_date|date:'Y/m/d' %}
                <div class="date-area text-center">
                    <label class="p-1 ps-3 pe-3 mt-2 mb-0">
                        <span>{{ line_message_item.send_date|naturalday|display_day }}</span>
                    </label>
                </div>
            {% endif %}
            {% if line_message_item.account_type == 0 and line_message_item.message_type != 8 %}
                <div class="content-item d-flex align-items-center position-relative mt-3 mb-3">
                    {% if line_message_user.profile.image %}
                        <img id="line_message_user_image" src="{{ line_message_user.profile.image.url }}">
                    {% elif line_message_user.user.display_image %}
                        <img id="line_message_user_image" src="{{ line_message_user.user.display_image }}">
                    {% else %}
                        <img id="line_message_user_image" src="{% static 'img/user-none.png' %}">
                    {% endif %}
                    {% if line_message_item.message_type == 0 or line_message_item.message_type == 3 or line_message_item.message_type == 4 %}
                        <div class="text-area p-2 ms-5 position-relative">
                            <p class="mb-0">{{ line_message_item.text|linebreaksbr }}</p>
                        </div>
                    {% elif line_message_item.message_type == 1 %}
                        {% if line_message_item.image_width >= line_message_item.image_height %}
                            <div class="image-area ms-5 position-relative">
                                {% if line_message_item.image %}
                                    <img src="{{ line_message_item.image.url }}">
                                {% endif %}
                            </div>
                        {% else %}
                            <div class="image-area half ms-5 position-relative">
                                {% if line_message_item.image %}
                                    <img src="{{ line_message_item.image.url }}">
                                {% endif %}
                            </div>
                        {% endif %}
                    {% elif line_message_item.message_type == 2 %}
                        {% if line_message_item.video %}
                            {% if line_message_item.video_width >= line_message_item.video_height %}
                                <div class="video-area ms-5 position-relative">
                                    <video src="{{ line_message_item.video.url }}" controls></video>
                                </div>
                            {% else %}
                                <div class="video-area half ms-5 position-relative">
                                    <video src="{{ line_message_item.video.url }}" controls></video>
                                </div>
                            {% endif %}
                        {% endif %}
                    {% elif line_message_item.message_type == 5 %}
                        {% if line_message_item.image_width >= line_message_item.image_height %}
                            <div class="image-area ms-5 position-relative">
                                {% if line_message_item.image %}
                                    <img src="{{ line_message_item.image.url }}">
                                {% endif %}
                            </div>
                        {% else %}
                            <div class="image-area half ms-5 position-relative">
                                {% if line_message_item.image %}
                                    <img src="{{ line_message_item.image.url }}">
                                {% endif %}
                            </div>
                        {% endif %}
                    {% elif line_message_item.message_type == 6 %}
                        {% if line_message_item.video %}
                            {% if line_message_item.video_width >= line_message_item.video_height %}
                                <div class="video-area ms-5 position-relative">
                                    <video src="{{ line_message_item.video.url }}" controls></video>
                                </div>
                            {% else %}
                                <div class="video-area half ms-5 position-relative">
                                    <video src="{{ line_message_item.video.url }}" controls></video>
                                </div>
                            {% endif %}
                        {% endif %}
                    {% elif line_message_item.message_type == 7 %}
                        <div class="position-relative overflow-hidden w-100 ms-5">
                            <ul class="talk-slide p-0">
                                {% if line_message_item.card_type.type == 1 %}
                                    {% for line_message_card_type_announce in line_message_item.card_type.announce %}
                                        <li style="margin-right: 0.5rem;">
                                            <div class="card-type-area"  style="width: 180px; height: auto; border: 1px solid rgba(0,0,0,0.1); border-radius: 0.8rem; overflow: hidden;">
                                                <div class="card-type-header-area">
                                                    <div class="d-flex position-relative w-100">
                                                        {% if line_message_card_type_announce.image_flg %}
                                                            {% if line_message_card_type_announce.image_count == '1' %}
                                                                <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                    <div class="one card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_1.url }}' );"></span>
                                                                    </div>
                                                                </div>
                                                            {% elif line_message_card_type_announce.image_count == '2' %}
                                                                <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                    <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_1.url }}' );"></span>
                                                                    </div>
                                                                    <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_2.url }}' );"></span>
                                                                    </div>
                                                                </div>
                                                            {% elif line_message_card_type_announce.image_count == '3' %}
                                                                <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                    <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_1.url }}' );"></span>
                                                                    </div>
                                                                    <div class="two flex-column position-relative">
                                                                        <div class="three card-type-image-item position-relative" style="padding-bottom: 3.75rem;">
                                                                            <span style="background-image: url( '{{ line_message_card_type_announce.image_2.url }}' );"></span>
                                                                        </div>
                                                                        <div class="three card-type-image-item position-relative" style="padding-bottom: 3.75rem;">
                                                                            <span style="background-image: url( '{{ line_message_card_type_announce.image_3.url }}' );"></span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            {% endif %}
                                                            {% if line_message_card_type_announce.label_flg %}
                                                                {% if line_message_card_type_announce.label_color == '0' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '1' %}
                                                                    <label class="label ps-1 pe-1" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '2' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '3' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '4' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '5' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_announce.label }}</label>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="card-type-body-area p-2">
                                                    <p class="title mb-1" style="font-size: 0.85rem;">{{ line_message_card_type_announce.title }}</p>
                                                    {% if line_message_card_type_announce.description_flg %}
                                                        <p class="description mb-1">{{ line_message_card_type_announce.description|linebreaksbr }}</p>
                                                    {% endif %}
                                                    {% for line_message_card_type_announce_text in line_message_card_type_announce.text %}
                                                        {% if line_message_card_type_announce_text.flg %}
                                                            {% if forloop.first %}
                                                                <div class="mt-2 mb-2">
                                                                    <p class="mb-0" style="font-size: 0.7rem; font-weight: bold;">{{ line_message_card_type_announce_text.title }}</p>
                                                                    <p class="mb-0" style="font-size: 0.5rem;">{{ line_message_card_type_announce_text.text }}</p>
                                                                </div>
                                                            {% else %}
                                                                <div class="mt-1 mb-2">
                                                                    <p class="mb-0" style="font-size: 0.7rem; font-weight: bold;">{{ line_message_card_type_announce_text.title }}</p>
                                                                    <p class="mb-0" style="font-size: 0.5rem;">{{ line_message_card_type_announce_text.text }}</p>
                                                                </div>
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </div>
                                                <div class="card-type-footer-area text-center">
                                                    {% for line_message_card_type_announce_action in line_message_card_type_announce.action %}
                                                        {% if line_message_card_type_announce_action.flg %}
                                                            {% if line_message_card_type_announce_action.button_type == 0 %}
                                                                {% if line_message_card_type_announce_action.button_color == 0 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #666f86;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 1 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 2 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 3 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #ed8537;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 4 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #00B900;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 5 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #5b82db;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% endif %}
                                                            {% elif line_message_card_type_announce_action.button_type == 1 %}
                                                                {% if line_message_card_type_announce_action.button_color == 0 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #666f86; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 1 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 2 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #eb4e3d; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 3 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #ed8537; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 4 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #00B900; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 5 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #5b82db; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </li>
                                    {% endfor %}
                                {% elif line_message_item.card_type.type == 2 %}
                                    {% for line_message_card_type_location in line_message_item.card_type.location %}
                                        <li style="margin-right: 0.5rem;">
                                            <div class="card-type-area" style="width: 180px; height: auto; border: 1px solid rgba(0,0,0,0.1); border-radius: 0.8rem; overflow: hidden;">
                                                <div class="card-type-header-area">
                                                    <div class="d-flex position-relative w-100">
                                                        {% if line_message_card_type_location.image_count == '1' %}
                                                            <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                <div class="one card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                    <span style="background-image: url( '{{ line_message_card_type_location.image_1.url }}' );"></span>
                                                                </div>
                                                            </div>
                                                        {% elif line_message_card_type_location.image_count == '2' %}
                                                            <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                    <span style="background-image: url( '{{ line_message_card_type_location.image_1.url }}' );"></span>
                                                                </div>
                                                                <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                    <span style="background-image: url( '{{ line_message_card_type_location.image_2.url }}' );"></span>
                                                                </div>
                                                            </div>
                                                        {% elif line_message_card_type_location.image_count == '3' %}
                                                            <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                    <span style="background-image: url( '{{ line_message_card_type_location.image_1.url }}' );"></span>
                                                                </div>
                                                                <div class="two flex-column position-relative">
                                                                    <div class="three card-type-image-item position-relative" style="padding-bottom: 3.75rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_location.image_2.url }}' );"></span>
                                                                    </div>
                                                                    <div class="three card-type-image-item position-relative" style="padding-bottom: 3.75rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_location.image_3.url }}' );"></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endif %}
                                                        {% if line_message_card_type_location.label_flg %}
                                                            {% if line_message_card_type_location.label_color == '0' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_location.label }}</label>
                                                            {% elif line_message_card_type_location.label_color == '1' %}
                                                                <label class="label ps-1 pe-1" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_location.label }}</label>
                                                            {% elif line_message_card_type_location.label_color == '2' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_location.label }}</label>
                                                            {% elif line_message_card_type_location.label_color == '3' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_location.label }}</label>
                                                            {% elif line_message_card_type_location.label_color == '4' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_location.label }}</label>
                                                            {% elif line_message_card_type_location.label_color == '5' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_location.label }}</label>
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="card-type-body-area p-2">
                                                    <p class="title mb-1">{{ line_message_card_type_location.title }}</p>
                                                    {% if line_message_card_type_location.place_flg %}
                                                        <p class="place d-flex align-items-center mb-1">
                                                            <img src="{% static 'img/icon/map.png' %}" class="me-1">
                                                            <span>{{ line_message_card_type_location.place }}</span>
                                                        </p>
                                                    {% endif %}
                                                    {% if line_message_card_type_location.plus_flg %}
                                                        <p class="plus d-flex align-items-center mb-0">
                                                            {% if line_message_card_type_location.plus_type == 1 %}
                                                                <img src="{% static 'img/icon/time.png' %}" class="me-1">
                                                            {% elif line_message_card_type_location.plus_type == 2 %}
                                                                <img src="{% static 'img/icon/coin.png' %}" class="me-1">
                                                            {% endif %}
                                                            <span>{{ line_message_card_type_location.plus }}</span>
                                                        </p>
                                                    {% endif %}
                                                </div>
                                                <div class="card-type-footer-area">
                                                    {% if line_message_card_type_location.action_flg_1 %}
                                                        <button type="button" class="btn p-0 mb-2">{{ line_message_card_type_location.action_label_1 }}</button>
                                                    {% endif %}
                                                    {% if line_message_card_type_location.action_flg_2 %}
                                                        <button type="button" class="btn p-0 mb-2">{{ line_message_card_type_location.action_label_2 }}</button>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </li>
                                    {% endfor %}
                                {% elif line_message_item.card_type.type == 3 %}
                                    {% for line_message_card_type_person in line_message_item.card_type.person %}
                                        <li style="margin-right: 0.5rem;">
                                            <div class="card-type-area" style="width: 180px; height: auto; border: 1px solid rgba(0,0,0,0.1); border-radius: 0.8rem; overflow: hidden;">
                                                <div class="card-type-header-area">
                                                    <div class="d-flex position-relative w-100">
                                                        <div class="card-type-image-area d-flex flex-row position-relative w-100 pt-3 ps-4 pe-4">
                                                            <div class="person card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                <span style="background-image: url( '{{ line_message_card_type_person.image.url }}' )"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-type-body-area p-2">
                                                    <p class="name mb-1">{{ line_message_card_type_person.name }}</p>
                                                    <p class="text-center mb-0">
                                                        {% if line_message_card_type_person.tag_flg_1 %}
                                                            {% if line_message_card_type_person.tag_color_1 == '0' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_1 == '1' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_1 == '2' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_1 == '3' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_1 == '4' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_1 == '5' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% endif %}
                                                        {% endif %}
                                                        {% if line_message_card_type_person.tag_flg_2 %}
                                                            {% if line_message_card_type_person.tag_color_2 == '0' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_2 == '1' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_2 == '2' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_2 == '3' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_2 == '4' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_2 == '5' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% endif %}
                                                        {% endif %}
                                                        {% if line_message_card_type_person.tag_flg_3 %}
                                                            {% if line_message_card_type_person.tag_color_3 == '0' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_3 == '1' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_3 == '2' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_3 == '3' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_3 == '4' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_3 == '5' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% endif %}
                                                        {% endif %}
                                                    </p>
                                                    <p class="title mb-1">{{ line_message_card_type_person.title }}</p>
                                                    {% if line_message_card_type_person.description_flg %}
                                                        <p class="description mb-1">{{ line_message_card_type_person.description }}</p>
                                                    {% endif %}
                                                    {% if line_message_card_type_person.place_flg %}
                                                        <p class="place d-flex align-items-center mb-1">
                                                            <img src="{% static 'img/icon/map.png' %}" class="me-1">
                                                            <span>{{ line_message_card_type_person.place }}</span>
                                                        </p>
                                                    {% endif %}
                                                    {% if line_message_card_type_person.plus_flg %}
                                                        <p class="plus d-flex align-items-center mb-0">
                                                            {% if line_message_card_type_person.plus_type == 1 %}
                                                                <img src="{% static 'img/icon/time.png' %}" class="me-1">
                                                            {% elif line_message_card_type_person.plus_type == 2 %}
                                                                <img src="{% static 'img/icon/coin.png' %}" class="me-1">
                                                            {% endif %}
                                                            <span>{{ line_message_card_type_person.plus }}</span>
                                                        </p>
                                                    {% endif %}
                                                </div>
                                                <div class="card-type-footer-area">
                                                    {% if line_message_card_type_person.action_flg_1 %}
                                                        <button type="button" class="btn p-0 mb-2">{{ line_message_card_type_person.action_label_1 }}</button>
                                                    {% endif %}
                                                    {% if line_message_card_type_person.action_flg_2 %}
                                                        <button type="button" class="btn p-0 mb-2">{{ line_message_card_type_person.action_label_2 }}</button>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </li>
                                    {% endfor %}
                                {% endif %}
                            </ul>
                        </div>
                    {% endif %}
                    <p class="ps-1 mt-auto mb-2">{{ line_message_item.send_date|date:'H:i' }}</p>
                </div>
            {% elif line_message_item.account_type == 1 and line_message_item.message_type != 8 %}
                <div class="content-item manager d-flex align-items-center position-relative mt-3 mb-3">
                    {% if line_message_item.profile.image %}
                        <img id="line_message_user_image" src="{{ line_message_item.profile.image.url }}">
                    {% else %}
                        <img id="line_message_user_image" src="{% static 'img/manager-none.png' %}">
                    {% endif %}
                    {% if line_message_item.message_type == 0 %}
                        <div class="text-area p-2 me-5 position-relative">
                            <p class="mb-0">{{ line_message_item.text|linebreaksbr }}</p>
                        </div>
                    {% elif line_message_item.message_type == 1 %}
                        {% if line_message_item.image_width >= line_message_item.image_height %}
                            <div class="image-area me-5 position-relative">
                                {% if line_message_item.image %}
                                    <img src="{{ line_message_item.image.url }}">
                                {% endif %}
                            </div>
                        {% else %}
                            <div class="image-area half me-5 position-relative">
                                {% if line_message_item.image %}
                                    <img src="{{ line_message_item.image.url }}">
                                {% endif %}
                            </div>
                        {% endif %}
                    {% elif line_message_item.message_type == 2 %}
                        {% if line_message_item.video %}
                            {% if line_message_item.video_width >= line_message_item.video_height %}
                                <div class="video-area me-5 position-relative">
                                    <video src="{{ line_message_item.video.url }}" controls></video>
                                </div>
                            {% else %}
                                <div class="video-area half me-5 position-relative">
                                    <video src="{{ line_message_item.video.url }}" controls></video>
                                </div>
                            {% endif %}
                        {% endif %}
                    {% elif line_message_item.message_type == 5 %}
                        {% if line_message_item.image_width >= line_message_item.image_height %}
                            <div class="image-area me-5 position-relative">
                                {% if line_message_item.image %}
                                    <img src="{{ line_message_item.image.url }}">
                                {% endif %}
                            </div>
                        {% else %}
                            <div class="image-area half me-5 position-relative">
                                {% if line_message_item.image %}
                                    <img src="{{ line_message_item.image.url }}">
                                {% endif %}
                            </div>
                        {% endif %}
                    {% elif line_message_item.message_type == 6 %}
                        {% if line_message_item.video %}
                            {% if line_message_item.video_width >= line_message_item.video_height %}
                                <div class="video-area me-5 position-relative">
                                    <video src="{{ line_message_item.video.url }}" controls></video>
                                </div>
                            {% else %}
                                <div class="video-area half me-5 position-relative">
                                    <video src="{{ line_message_item.video.url }}" controls></video>
                                </div>
                            {% endif %}
                        {% endif %}
                    {% elif line_message_item.message_type == 7 %}
                        <div class="position-relative overflow-hidden w-100 me-5">
                            <ul class="talk-slide p-0">
                                {% if line_message_item.card_type.type == 1 %}
                                    {% for line_message_card_type_announce in line_message_item.card_type.announce %}
                                        <li style="margin-right: 0.5rem;">
                                            <div class="card-type-area"  style="width: 180px; height: auto; border: 1px solid rgba(0,0,0,0.1); border-radius: 0.8rem; overflow: hidden;">
                                                <div class="card-type-header-area">
                                                    <div class="d-flex position-relative w-100">
                                                        {% if line_message_card_type_announce.image_flg %}
                                                            {% if line_message_card_type_announce.image_count == '1' %}
                                                                <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                    <div class="one card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_1.url }}' );"></span>
                                                                    </div>
                                                                </div>
                                                            {% elif line_message_card_type_announce.image_count == '2' %}
                                                                <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                    <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_1.url }}' );"></span>
                                                                    </div>
                                                                    <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_2.url }}' );"></span>
                                                                    </div>
                                                                </div>
                                                            {% elif line_message_card_type_announce.image_count == '3' %}
                                                                <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                    <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_1.url }}' );"></span>
                                                                    </div>
                                                                    <div class="two flex-column position-relative">
                                                                        <div class="three card-type-image-item position-relative" style="padding-bottom: 3.75rem;">
                                                                            <span style="background-image: url( '{{ line_message_card_type_announce.image_2.url }}' );"></span>
                                                                        </div>
                                                                        <div class="three card-type-image-item position-relative" style="padding-bottom: 3.75rem;">
                                                                            <span style="background-image: url( '{{ line_message_card_type_announce.image_3.url }}' );"></span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            {% endif %}
                                                            {% if line_message_card_type_announce.label_flg %}
                                                                {% if line_message_card_type_announce.label_color == '0' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '1' %}
                                                                    <label class="label ps-1 pe-1" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '2' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '3' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '4' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '5' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_announce.label }}</label>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="card-type-body-area p-2">
                                                    <p class="title mb-1" style="font-size: 0.85rem;">{{ line_message_card_type_announce.title }}</p>
                                                    {% if line_message_card_type_announce.description_flg %}
                                                        <p class="description mb-1">{{ line_message_card_type_announce.description|linebreaksbr }}</p>
                                                    {% endif %}
                                                    {% for line_message_card_type_announce_text in line_message_card_type_announce.text %}
                                                        {% if line_message_card_type_announce_text.flg %}
                                                            {% if forloop.first %}
                                                                <div class="mt-2 mb-2">
                                                                    <p class="mb-0" style="font-size: 0.7rem; font-weight: bold;">{{ line_message_card_type_announce_text.title }}</p>
                                                                    <p class="mb-0" style="font-size: 0.5rem;">{{ line_message_card_type_announce_text.text }}</p>
                                                                </div>
                                                            {% else %}
                                                                <div class="mt-1 mb-2">
                                                                    <p class="mb-0" style="font-size: 0.7rem; font-weight: bold;">{{ line_message_card_type_announce_text.title }}</p>
                                                                    <p class="mb-0" style="font-size: 0.5rem;">{{ line_message_card_type_announce_text.text }}</p>
                                                                </div>
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </div>
                                                <div class="card-type-footer-area text-center">
                                                    {% for line_message_card_type_announce_action in line_message_card_type_announce.action %}
                                                        {% if line_message_card_type_announce_action.flg %}
                                                            {% if line_message_card_type_announce_action.button_type == 0 %}
                                                                {% if line_message_card_type_announce_action.button_color == 0 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #666f86;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 1 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 2 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 3 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #ed8537;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 4 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #00B900;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 5 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #5b82db;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% endif %}
                                                            {% elif line_message_card_type_announce_action.button_type == 1 %}
                                                                {% if line_message_card_type_announce_action.button_color == 0 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #666f86; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 1 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 2 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #eb4e3d; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 3 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #ed8537; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 4 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #00B900; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 5 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #5b82db; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </li>
                                    {% endfor %}
                                {% elif line_message_item.card_type.type == 2 %}
                                    {% for line_message_card_type_location in line_message_item.card_type.location %}
                                        <li style="margin-right: 0.5rem;">
                                            <div class="card-type-area" style="width: 180px; height: auto; border: 1px solid rgba(0,0,0,0.1); border-radius: 0.8rem; overflow: hidden;">
                                                <div class="card-type-header-area">
                                                    <div class="d-flex position-relative w-100">
                                                        {% if line_message_card_type_location.image_count == '1' %}
                                                            <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                <div class="one card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                    <span style="background-image: url( '{{ line_message_card_type_location.image_1.url }}' );"></span>
                                                                </div>
                                                            </div>
                                                        {% elif line_message_card_type_location.image_count == '2' %}
                                                            <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                    <span style="background-image: url( '{{ line_message_card_type_location.image_1.url }}' );"></span>
                                                                </div>
                                                                <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                    <span style="background-image: url( '{{ line_message_card_type_location.image_2.url }}' );"></span>
                                                                </div>
                                                            </div>
                                                        {% elif line_message_card_type_location.image_count == '3' %}
                                                            <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                    <span style="background-image: url( '{{ line_message_card_type_location.image_1.url }}' );"></span>
                                                                </div>
                                                                <div class="two flex-column position-relative">
                                                                    <div class="three card-type-image-item position-relative" style="padding-bottom: 3.75rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_location.image_2.url }}' );"></span>
                                                                    </div>
                                                                    <div class="three card-type-image-item position-relative" style="padding-bottom: 3.75rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_location.image_3.url }}' );"></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endif %}
                                                        {% if line_message_card_type_location.label_flg %}
                                                            {% if line_message_card_type_location.label_color == '0' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_location.label }}</label>
                                                            {% elif line_message_card_type_location.label_color == '1' %}
                                                                <label class="label ps-1 pe-1" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_location.label }}</label>
                                                            {% elif line_message_card_type_location.label_color == '2' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_location.label }}</label>
                                                            {% elif line_message_card_type_location.label_color == '3' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_location.label }}</label>
                                                            {% elif line_message_card_type_location.label_color == '4' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_location.label }}</label>
                                                            {% elif line_message_card_type_location.label_color == '5' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_location.label }}</label>
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="card-type-body-area p-2">
                                                    <p class="title mb-1">{{ line_message_card_type_location.title }}</p>
                                                    {% if line_message_card_type_location.place_flg %}
                                                        <p class="place d-flex align-items-center mb-1">
                                                            <img src="{% static 'img/icon/map.png' %}" class="me-1">
                                                            <span>{{ line_message_card_type_location.place }}</span>
                                                        </p>
                                                    {% endif %}
                                                    {% if line_message_card_type_location.plus_flg %}
                                                        <p class="plus d-flex align-items-center mb-0">
                                                            {% if line_message_card_type_location.plus_type == 1 %}
                                                                <img src="{% static 'img/icon/time.png' %}" class="me-1">
                                                            {% elif line_message_card_type_location.plus_type == 2 %}
                                                                <img src="{% static 'img/icon/coin.png' %}" class="me-1">
                                                            {% endif %}
                                                            <span>{{ line_message_card_type_location.plus }}</span>
                                                        </p>
                                                    {% endif %}
                                                </div>
                                                <div class="card-type-footer-area">
                                                    {% if line_message_card_type_location.action_flg_1 %}
                                                        <button type="button" class="btn p-0 mb-2">{{ line_message_card_type_location.action_label_1 }}</button>
                                                    {% endif %}
                                                    {% if line_message_card_type_location.action_flg_2 %}
                                                        <button type="button" class="btn p-0 mb-2">{{ line_message_card_type_location.action_label_2 }}</button>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </li>
                                    {% endfor %}
                                {% elif line_message_item.card_type.type == 3 %}
                                    {% for line_message_card_type_person in line_message_item.card_type.person %}
                                        <li style="margin-right: 0.5rem;">
                                            <div class="card-type-area" style="width: 180px; height: auto; border: 1px solid rgba(0,0,0,0.1); border-radius: 0.8rem; overflow: hidden;">
                                                <div class="card-type-header-area">
                                                    <div class="d-flex position-relative w-100">
                                                        <div class="card-type-image-area d-flex flex-row position-relative w-100 pt-3 ps-4 pe-4">
                                                            <div class="person card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                <span style="background-image: url( '{{ line_message_card_type_person.image.url }}' )"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-type-body-area p-2">
                                                    <p class="name mb-1">{{ line_message_card_type_person.name }}</p>
                                                    <p class="text-center mb-0">
                                                        {% if line_message_card_type_person.tag_flg_1 %}
                                                            {% if line_message_card_type_person.tag_color_1 == '0' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_1 == '1' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_1 == '2' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_1 == '3' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_1 == '4' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_1 == '5' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_person.tag_1 }}</label>
                                                            {% endif %}
                                                        {% endif %}
                                                        {% if line_message_card_type_person.tag_flg_2 %}
                                                            {% if line_message_card_type_person.tag_color_2 == '0' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_2 == '1' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_2 == '2' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_2 == '3' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_2 == '4' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_2 == '5' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_person.tag_2 }}</label>
                                                            {% endif %}
                                                        {% endif %}
                                                        {% if line_message_card_type_person.tag_flg_3 %}
                                                            {% if line_message_card_type_person.tag_color_3 == '0' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_3 == '1' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_3 == '2' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_3 == '3' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_3 == '4' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% elif line_message_card_type_person.tag_color_3 == '5' %}
                                                                <label class="tag ps-1 pe-1 mb-0" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_person.tag_3 }}</label>
                                                            {% endif %}
                                                        {% endif %}
                                                    </p>
                                                    <p class="title mb-1">{{ line_message_card_type_person.title }}</p>
                                                    {% if line_message_card_type_person.description_flg %}
                                                        <p class="description mb-1">{{ line_message_card_type_person.description }}</p>
                                                    {% endif %}
                                                    {% if line_message_card_type_person.place_flg %}
                                                        <p class="place d-flex align-items-center mb-1">
                                                            <img src="{% static 'img/icon/map.png' %}" class="me-1">
                                                            <span>{{ line_message_card_type_person.place }}</span>
                                                        </p>
                                                    {% endif %}
                                                    {% if line_message_card_type_person.plus_flg %}
                                                        <p class="plus d-flex align-items-center mb-0">
                                                            {% if line_message_card_type_person.plus_type == 1 %}
                                                                <img src="{% static 'img/icon/time.png' %}" class="me-1">
                                                            {% elif line_message_card_type_person.plus_type == 2 %}
                                                                <img src="{% static 'img/icon/coin.png' %}" class="me-1">
                                                            {% endif %}
                                                            <span>{{ line_message_card_type_person.plus }}</span>
                                                        </p>
                                                    {% endif %}
                                                </div>
                                                <div class="card-type-footer-area">
                                                    {% if line_message_card_type_person.action_flg_1 %}
                                                        <button type="button" class="btn p-0 mb-2">{{ line_message_card_type_person.action_label_1 }}</button>
                                                    {% endif %}
                                                    {% if line_message_card_type_person.action_flg_2 %}
                                                        <button type="button" class="btn p-0 mb-2">{{ line_message_card_type_person.action_label_2 }}</button>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </li>
                                    {% endfor %}
                                {% elif line_message_item.card_type.type == 4 %}
                                    {% for line_message_card_type_image in line_message_item.card_type.image %}
                                        <li style="margin-right: 0.5rem;">
                                            <div class="card-type-area" style="width: 180px; height: auto; border: 1px solid rgba(0,0,0,0.1); border-radius: 0.8rem; overflow: hidden;">
                                                <div class="card-type-header-area">
                                                    <div class="d-flex position-relative w-100">
                                                        <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                            <div class="one card-type-image-item position-relative" style="padding-bottom: 10rem;">
                                                                <span style="background-image: url( '{{ line_message_card_type_image.image.url }}' )"></span>
                                                            </div>
                                                        </div>
                                                        {% if line_message_card_type_image.label_flg %}
                                                            {% if line_message_card_type_image.label_color == '0' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_image.label }}</label>
                                                            {% elif line_message_card_type_image.label_color == '1' %}
                                                                <label class="label ps-1 pe-1" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_image.label }}</label>
                                                            {% elif line_message_card_type_image.label_color == '2' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_image.label }}</label>
                                                            {% elif line_message_card_type_image.label_color == '3' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_image.label }}</label>
                                                            {% elif line_message_card_type_image.label_color == '4' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_image.label }}</label>
                                                            {% elif line_message_card_type_image.label_color == '5' %}
                                                                <label class="label ps-1 pe-1" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_image.label }}</label>
                                                            {% endif %}
                                                        {% endif %}
                                                        {% if line_message_card_type_image.action_flg %}
                                                            <label class="action-label ps-1 pe-1">{{ line_message_card_type_image.action_label }}</label>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                    {% endfor %}
                                {% elif line_message_item.card_type.type == 4 %}
                                    {% for line_message_card_type_announce in line_message_item.card_type.announce %}
                                        <li style="margin-right: 0.5rem;">
                                            <div class="card-type-area"  style="width: 180px; height: auto; border: 1px solid rgba(0,0,0,0.1); border-radius: 0.8rem; overflow: hidden;">
                                                <div class="card-type-header-area">
                                                    <div class="d-flex position-relative w-100">
                                                        {% if line_message_card_type_announce.image_flg %}
                                                            {% if line_message_card_type_announce.image_count == '1' %}
                                                                <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                    <div class="one card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_1.url }}' );"></span>
                                                                    </div>
                                                                </div>
                                                            {% elif line_message_card_type_announce.image_count == '2' %}
                                                                <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                    <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_1.url }}' );"></span>
                                                                    </div>
                                                                    <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_2.url }}' );"></span>
                                                                    </div>
                                                                </div>
                                                            {% elif line_message_card_type_announce.image_count == '3' %}
                                                                <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                                    <div class="two card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                        <span style="background-image: url( '{{ line_message_card_type_announce.image_1.url }}' );"></span>
                                                                    </div>
                                                                    <div class="two flex-column position-relative">
                                                                        <div class="three card-type-image-item position-relative" style="padding-bottom: 3.75rem;">
                                                                            <span style="background-image: url( '{{ line_message_card_type_announce.image_2.url }}' );"></span>
                                                                        </div>
                                                                        <div class="three card-type-image-item position-relative" style="padding-bottom: 3.75rem;">
                                                                            <span style="background-image: url( '{{ line_message_card_type_announce.image_3.url }}' );"></span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            {% endif %}
                                                            {% if line_message_card_type_announce.label_flg %}
                                                                {% if line_message_card_type_announce.label_color == '0' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #666f86;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '1' %}
                                                                    <label class="label ps-1 pe-1" style="color: #666f86; background-color: #fff; border: 1px solid #666f86;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '2' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '3' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #ed8537;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '4' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #00B900;">{{ line_message_card_type_announce.label }}</label>
                                                                {% elif line_message_card_type_announce.label_color == '5' %}
                                                                    <label class="label ps-1 pe-1" style="color: #fff; background-color: #5b82db;">{{ line_message_card_type_announce.label }}</label>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="card-type-body-area p-2">
                                                    <p class="title mb-1" style="font-size: 0.85rem;">{{ line_message_card_type_announce.title }}</p>
                                                    {% if line_message_card_type_announce.description_flg %}
                                                        <p class="description mb-1">{{ line_message_card_type_announce.description|linebreaksbr }}</p>
                                                    {% endif %}
                                                    {% for line_message_card_type_announce_text in line_message_card_type_announce.text %}
                                                        {% if line_message_card_type_announce_text.flg %}
                                                            {% if forloop.first %}
                                                                <div class="mt-2 mb-2">
                                                                    <p class="mb-0" style="font-size: 0.7rem; font-weight: bold;">{{ line_message_card_type_announce_text.title }}</p>
                                                                    <p class="mb-0" style="font-size: 0.5rem;">{{ line_message_card_type_announce_text.text }}</p>
                                                                </div>
                                                            {% else %}
                                                                <div class="mt-1 mb-2">
                                                                    <p class="mb-0" style="font-size: 0.7rem; font-weight: bold;">{{ line_message_card_type_announce_text.title }}</p>
                                                                    <p class="mb-0" style="font-size: 0.5rem;">{{ line_message_card_type_announce_text.text }}</p>
                                                                </div>
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </div>
                                                <div class="card-type-footer-area text-center">
                                                    {% for line_message_card_type_announce_action in line_message_card_type_announce.action %}
                                                        {% if line_message_card_type_announce_action.flg %}
                                                            {% if line_message_card_type_announce_action.button_type == 0 %}
                                                                {% if line_message_card_type_announce_action.button_color == 0 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #666f86;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 1 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 2 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #eb4e3d;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 3 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #ed8537;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 4 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #00B900;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 5 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #5b82db;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% endif %}
                                                            {% elif line_message_card_type_announce_action.button_type == 1 %}
                                                                {% if line_message_card_type_announce_action.button_color == 0 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #666f86; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 1 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #fff; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 2 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #eb4e3d; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 3 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #ed8537; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 4 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #00B900; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% elif line_message_card_type_announce_action.button_color == 5 %}
                                                                    <button type="button" class="btn p-0 mb-2" style="width: 90%; color: #5b82db; background-color: #fff;">{{ line_message_card_type_announce_action.label }}</button>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </li>
                                    {% endfor %}
                                {% endif %}
                                {% if line_message_item.card_type.more %}
                                    {% if line_message_item.card_type.more.template == 1 %}
                                        <li style="margin-right: 0.5rem;">
                                            <div class="card-type-area" style="width: 180px; height: 160px; border: 1px solid rgba(0,0,0,0.1); border-radius: 0.8rem; overflow: hidden;">
                                                <div class="card-type-body-area position-relative ps-2 pe-2" style="width: 100%; height: 100%; background-color: #FFF;">
                                                    <p class="more mb-1"></p>
                                                </div>
                                            </div>
                                        </li>
                                    {% elif line_message_item.card_type.more.template == 2 %}
                                        <li style="margin-right: 0.5rem;">
                                            <div class="card-type-area" style="width: 180px; height: 10rem; border: 1px solid rgba(0,0,0,0.1); border-radius: 0.8rem; overflow: hidden;">
                                                <div class="card-type-header-area">
                                                    <div class="d-flex position-relative w-100">
                                                        <div class="card-type-image-area d-flex flex-row position-relative w-100">
                                                            <div class="one card-type-image-item position-relative" style="padding-bottom: 7.5rem;">
                                                                <span style="background-image: url( '{{ line_message_item.card_type.more.image.url }}' )"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-type-body-area position-relative ps-2 pe-2" style="height: calc(100% - 120px);">
                                                    <p class="more mb-1"></p>
                                                </div>
                                            </div>
                                        </li>
                                    {% endif %}
                                {% endif %}
                            </ul>
                        </div>
                    {% endif %}
                    <p class="pe-1 mt-auto mb-2">{{ line_message_item.send_date|date:'H:i' }}</p>
                </div>
            {% endif %}
            {% variable line_message_item.send_date|date:'Y/m/d' as last_send_date %}
        {% endfor %}
    </div>
    <input type="hidden" id="send_id" value="{{ line_message_user.display_id }}">
    {% if request.user.authority > 1 %}
        {% for line_user_item in line_user %}
            {% if line_user_item.user.display_id == line_message_user.display_id %}
                <div id="send_{{ line_user_item.user.display_id }}_area" class="send-area p-3 pb-1 position-relative">
                    <form id="send_{{ line_user_item.user.display_id }}_form" action="{% url 'talk:send_text' %}" method="POST" enctype="multipart/form-data" data-parsley-focus="none">
                        <input type="hidden" name="id" value="{{ line_user_item.user.display_id }}">
                        <textarea name="message" class="d-block input-textarea" placeholder=""></textarea>
                    </form>
                    <img src="{% static 'img/icon/emoji.png' %}">
                </div>
            {% else %}
                <div id="send_{{ line_user_item.user.display_id }}_area" class="send-area d-none p-3 pb-1 position-relative">
                    <form id="send_{{ line_user_item.user.display_id }}_form" action="{% url 'talk:send_text' %}" method="POST" enctype="multipart/form-data" data-parsley-focus="none">
                        <input type="hidden" name="id" value="{{ line_user_item.user.display_id }}">
                        <textarea name="message" class="d-block input-textarea" placeholder=""></textarea>
                    </form>
                    <img src="{% static 'img/icon/emoji.png' %}">
                </div>
            {% endif %}
        {% endfor %}
        <div class="action-area d-flex justify-content-between align-items-center ps-3 pe-3">
            <div class="menu-area d-flex justify-content-between align-items-center">
                <div class="dropdown input-select-dropdown d-inline-block p-0">
                    <button id="select_template" class="btn template-button position-relative" data-bs-toggle="dropdown">
                        <span></span>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="select_template">
                        <button type="button" value="0" class="btn select_template_button dropdown-item fw-bold text-center p-1"></button>
                        <button type="button" class="d-none" data-bs-toggle="modal" data-bs-target="#template_text_modal"></button>
                        <button type="button" value="1" class="btn select_template_button dropdown-item fw-bold text-center border-top p-1 pt-2"></button>
                        <button type="button" class="d-none" data-bs-toggle="modal" data-bs-target="#template_video_modal"></button>
                        <button type="button" value="2" class="btn select_template_button dropdown-item fw-bold text-center border-top p-1 pt-2"></button>
                        <button type="button" class="d-none" data-bs-toggle="modal" data-bs-target="#template_richmessage_modal"></button>
                        <button type="button" value="3" class="btn select_template_button dropdown-item fw-bold text-center border-top p-1 pt-2"></button>
                        <button type="button" class="d-none" data-bs-toggle="modal" data-bs-target="#template_richvideo_modal"></button>
                        <button type="button" value="4" class="btn select_template_button dropdown-item fw-bold text-center border-top p-1 pt-2"></button>
                        <button type="button" class="d-none" data-bs-toggle="modal" data-bs-target="#template_cardtype_modal"></button>
                    </div>
                </div>
                <button type="button" class="d-none" data-bs-toggle="modal" data-bs-target="#template_modal"></button>
                <button class="btn name-button position-relative">
                    <span></span>
                </button>
                <button class="btn video-button">
                    <i class='bx bx-play-circle mt-1'></i>
                </button>
                <input type="file" id="video_file" name="video_file" accept=".mp4" style="display: none;">
                <input type="hidden" id="send_video_url" value="{% url 'talk:send_video' %}">
                <button type="button" id="upload_video_modal_button" class="d-none" data-bs-toggle="modal" data-bs-target="#upload_video_modal"></button>
                <button class="btn image-button">
                    <img src="{% static 'img/icon/image.svg' %}">
                </button>
                <input type="file" id="image_file" name="image_file" accept=".png, .jpg, .jpeg" style="display: none;">
                <input type="hidden" id="send_image_url" value="{% url 'talk:send_image' %}">
                <button type="button" id="upload_image_modal_button" class="d-none" data-bs-toggle="modal" data-bs-target="#upload_image_modal"></button>
            </div>
            <div class="button-area">
                <button id="line_message_send_button" class="btn ps-4"></button>
            </div>
        </div>
    {% endif %}
</div>