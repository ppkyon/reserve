{% extends '../base.html' %}

{% load static %}

{% block css %}
    <link href="{% static 'css/line/reserve.css' %}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block content %}
    <input type="hidden" name="shop_id" value="{{ shop_id }}">
    <input type="hidden" name="place_flg">
    <input type="hidden" name="course_flg">
    <input type="hidden" name="question_flg">
    <input type="hidden" id="check_url" value="{% url 'line:reserve:check' %}">
    <div class="place-area d-none">
        <div class="menu-area">
            <div class="row">
                <div class="col-12 p-0">
                    <div class="d-flex align-items-center">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-off.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                    </div>
                </div>
            </div>
            <div class="row mb-5">
                <div class="col-12 p-0">
                    <div class="d-flex justify-content-start align-items-center">
                        <p class="menu-text active mb-0">会場選択</p>
                        <p class="menu-text mb-0">コース選択</p>
                        <p class="menu-text mb-0">日時選択</p>
                        <p class="menu-text mb-0">設問</p>
                        <p class="menu-text mb-0">予約確認</p>
                        <p class="menu-text mb-0">受付完了</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="content-area mb-4">
            <div class="row">
                <div class="col-12 text-center p-0">
                    <p class="content-title pt-2 pb-2 mb-0">会場選択</p>
                </div>
            </div>
            <div class="row mb-2">
                <div class="col-12 p-0">
                    <div class="content-item-area-wrap"></div>
                </div>
            </div>
        </div>
        <div class="footer-area d-none mb-3">
            <div class="row">
                <div class="col-12 footer-bar text-center p-0">
                    <div class="d-flex align-items-center m-3">
                        <label class="footer-label mb-0">選択中</label>
                        <p class="footer-text footer-place-text mb-0 ms-1"></p>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn footer-button"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="course-area d-none">
        <div class="menu-area">
            <div class="row">
                <div class="col-12 p-0">
                    <div class="d-flex align-items-center">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon place-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-off.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                    </div>
                </div>
            </div>
            <div class="row mb-5">
                <div class="col-12 p-0">
                    <div class="d-flex justify-content-start align-items-center">
                        <p class="menu-text mb-0">会場選択</p>
                        <p class="menu-text active mb-0">コース選択</p>
                        <p class="menu-text mb-0">日時選択</p>
                        <p class="menu-text mb-0">設問</p>
                        <p class="menu-text mb-0">予約確認</p>
                        <p class="menu-text mb-0">受付完了</p>
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" id="get_course_url" value="{% url 'line:reserve:get_course' %}">
            <div class="title-area row">
                <div class="col-12 text-center p-0">
                    <p class="content-title pt-2 pb-2">コース選択</p>
                </div>
            </div>
        <div class="content-area mb-3"></div>
        <div class="footer-area d-none mb-3">
            <div class="row">
                <div class="col-12 footer-bar text-center p-0">
                    <div class="d-flex align-items-center m-3 mb-0">
                        <label class="footer-label mb-0">選択中</label>
                        <p class="footer-text footer-place-text mb-0 ms-1"></p>
                    </div>
                    <div class="d-flex align-items-center m-3 mt-0 mb-0">
                        <label class="footer-label mb-0"></label>
                        <p class="footer-text footer-course-text mb-0 ms-1"></p>
                    </div>
                    <div class="text-center mt-3">
                        <button type="button" class="btn footer-button">日時の選択へ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="date-area d-none">
        <div class="menu-area">
            <div class="row">
                <div class="col-12 p-0">
                    <div class="d-flex align-items-center">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon place-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon course-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-off.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                    </div>
                </div>
            </div>
            <div class="row mb-5">
                <div class="col-12 p-0">
                    <div class="d-flex justify-content-start align-items-center">
                        <p class="menu-text mb-0">会場選択</p>
                        <p class="menu-text mb-0">コース選択</p>
                        <p class="menu-text active mb-0">日時選択</p>
                        <p class="menu-text mb-0">設問</p>
                        <p class="menu-text mb-0">予約確認</p>
                        <p class="menu-text mb-0">受付完了</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="content-area mb-4">
            <div class="row">
                <div class="col-12 text-center p-0">
                    <p class="content-title pt-2 pb-2 mb-0">希望日時選択</p>
                    <input type="hidden" id="get_date_url" value="{% url 'line:reserve:get_date' %}">
                </div>
            </div>
            <div class="row mt-2 mb-2">
                <div class="col-12 text-end p-0">
                    <div class="dropdown input-select-dropdown input-select-setting-dropdown d-inline-block p-0" style="width: 50%;">
                        <input type="text" name="select_setting" class="input-text input-select w-100 ps-2 pe-2" data-bs-toggle="dropdown" data-parsley-errors-messages-disabled readonly required>
                        <input type="hidden">
                        <div class="dropdown-menu w-100"></div>
                    </div>
                </div>
            </div>
            <div class="date-content-area">
                <div class="row mt-2 mb-2">
                    <div class="col-12 p-0">
                        <div class="d-flex justify-content-center align-items-center">
                            <label class="date-arrow-icon prev-date-arrow p-1 me-auto mb-0"><</label>
                            <input type="hidden">
                            <input type="hidden">
                            <input type="hidden">
                            <div class="text-center">
                                <p class="date-year-text mb-0"></p>
                                <input type="hidden">
                                <p class="date-week-text mb-0"></p>
                                <input type="hidden">
                                <input type="hidden">
                            </div>
                            <label class="date-arrow-icon next-date-arrow p-1 ms-auto mb-0">></label>
                            <input type="hidden">
                            <input type="hidden">
                            <input type="hidden">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 p-0">
                        <div class="table-area">
                            <table class="table date-table text-center mb-0" style="border: 1px solid #BEBEBE;">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;"></th>
                                        <th class="p-1">
                                            <p class="calendar-day-text mb-0"></p>
                                            <p class="mb-0">月</p>
                                        </th>
                                        <th class="p-1">
                                            <p class="calendar-day-text mb-0"></p>
                                            <p class="mb-0">火</p>
                                        </th>
                                        <th class="p-1">
                                            <p class="calendar-day-text mb-0"></p>
                                            <p class="mb-0">水</p>
                                        </th>
                                        <th class="p-1">
                                            <p class="calendar-day-text mb-0"></p>
                                            <p class="mb-0">木</p>
                                        </th>
                                        <th class="p-1">
                                            <p class="calendar-day-text mb-0"></p>
                                            <p class="mb-0">金</p>
                                        </th>
                                        <th class="p-1">
                                            <p class="calendar-day-text mb-0"></p>
                                            <p class="mb-0">土</p>
                                        </th>
                                        <th class="p-1">
                                            <p class="calendar-day-text mb-0" style="color: #FF0000;"></p>
                                            <p class="mb-0" style="color: #FF0000;">日</p>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="text-center"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="date-loader-area d-flex justify-content-center align-items-center text-center w-100 d-none" style="height: 50vh;">
                <div class="table-loader spinner-border">
                    <span class="visually-hidden" style="font-size: 12px;">リアルタイムスケジュール取得中...</span>
                </div>
                <p class="h5 fw-bold ms-3 mb-0" style="font-size: 12px;">リアルタイムスケジュール取得中...</p>
            </div>
        </div>
        <div class="footer-area d-none mb-3">
            <div class="row">
                <div class="col-12 footer-bar text-center p-0">
                    <div class="d-flex align-items-center m-3 mb-0">
                        <label class="footer-label mb-0">選択中</label>
                        <p class="footer-text footer-place-text mb-0 ms-1"></p>
                    </div>
                    <div class="d-flex align-items-center m-3 mt-0 mb-0">
                        <label class="footer-label mb-0"></label>
                        <p class="footer-text footer-course-text mb-0 ms-1"></p>
                    </div>
                    <div class="d-flex align-items-center m-3 mt-0">
                        <label class="footer-label mb-0"></label>
                        <p class="footer-text footer-date-text mb-0 ms-1"></p>
                    </div>
                    <div class="text-center mt-3">
                        <button type="button" class="btn footer-button"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="question-area d-none">
        <div class="menu-area">
            <div class="row">
                <div class="col-12 p-0">
                    <div class="d-flex align-items-center">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon place-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon course-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon date-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-off.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                    </div>
                </div>
            </div>
            <div class="row mb-5">
                <div class="col-12 p-0">
                    <div class="d-flex justify-content-start align-items-center">
                        <p class="menu-text mb-0">会場選択</p>
                        <p class="menu-text mb-0">コース選択</p>
                        <p class="menu-text mb-0">日時選択</p>
                        <p class="menu-text active mb-0">設問</p>
                        <p class="menu-text mb-0">予約確認</p>
                        <p class="menu-text mb-0">受付完了</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="content-area content-item-area mb-4">
            <div class="row">
                <div class="col-12 text-center p-0">
                    <input type="hidden" id="question_id">
                    <p class="content-title pt-2 pb-2 mb-0"></p>
                    <input type="hidden" id="get_question_url" value="{% url 'line:reserve:get_question' %}">
                </div>
            </div>
            <div class="row mb-2">
                <div class="col-12">
                    <p class="content-description pt-2 pb-2 mb-0"></p>
                </div>
            </div>
            <div class="content-question-area">
                <form id="question_form" method="POST" enctype="multipart/form-data" data-parsley-focus="none"></form>
            </div>
        </div>
        <div class="button-area mb-3">
            <div class="row">
                <div class="col-12 text-center p-0 mb-2">
                    <button type="button" class="btn check-button">この内容で予約する</button>
                </div>
            </div>
        </div>
    </div>
    <div class="check-area d-none">
        <div class="menu-area">
            <div class="row">
                <div class="col-12 p-0">
                    <div class="d-flex align-items-center">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon place-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon course-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon date-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon question-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-off.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-no.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                    </div>
                </div>
            </div>
            <div class="row mb-5">
                <div class="col-12 p-0">
                    <div class="d-flex justify-content-start align-items-center">
                        <p class="menu-text mb-0">会場選択</p>
                        <p class="menu-text mb-0">コース選択</p>
                        <p class="menu-text mb-0">日時選択</p>
                        <p class="menu-text mb-0">設問</p>
                        <p class="menu-text active mb-0">予約確認</p>
                        <p class="menu-text mb-0">受付完了</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="content-area mb-4">
            <div class="row">
                <div class="col-12 text-center p-0">
                    <p class="content-title pt-2 pb-2 mb-0">ご予約内容</p>
                    <input type="hidden" id="send_reserve_url" value="{% url 'line:reserve:send' %}">
                </div>
            </div>
            <div class="row">
                <div class="col-12 p-0">
                    <div class="content-item-area">
                        <div class="p-2">
                            <div class="content-item-title-area d-flex align-items-center mb-1">
                                <p class="content-item-title mb-0">会場</p>
                            </div>
                            <p class="content-item-description check-place-text me-5 mb-0"></p>
                        </div>
                        <div class="p-2">
                            <div class="content-item-title-area d-flex align-items-center mb-1">
                                <p class="content-item-title mb-0">コース</p>
                            </div>
                            <p class="content-item-description check-course-text me-5 mb-0"></p>
                        </div>
                        <div class="p-2">
                            <div class="content-item-title-area d-flex align-items-center mb-1">
                                <p class="content-item-title mb-0">日時</p>
                            </div>
                            <p class="content-item-description check-date-text me-5 mb-0"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="button-area mb-3">
            <div class="row">
                <div class="col-12 text-center p-0 mb-2">
                    <button type="button" class="btn reserve-button">この内容で予約する</button>
                </div>
            </div>
        </div>
    </div>
    <div class="end-area d-none">
        <div class="menu-area">
            <div class="row">
                <div class="col-12 p-0">
                    <div class="d-flex align-items-center">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-on.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                        <img src="{% static 'img/reserve/menu-off.svg' %}" class="menu-icon">
                        <label class="menu-bar mb-0"></label>
                    </div>
                </div>
            </div>
            <div class="row mb-5">
                <div class="col-12 p-0">
                    <div class="d-flex justify-content-start align-items-center">
                        <p class="menu-text mb-0">会場選択</p>
                        <p class="menu-text mb-0">コース選択</p>
                        <p class="menu-text mb-0">日時選択</p>
                        <p class="menu-text mb-0">設問</p>
                        <p class="menu-text mb-0">予約確認</p>
                        <p class="menu-text active mb-0">受付完了</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="content-area mb-4">
            <div class="row mb-3">
                <div class="col-12 text-center p-0">
                    <p class="content-message mb-1">ご予約を承りました！</p>
                </div>
            </div>
            <div class="row">
                <div class="col-12 text-center p-0">
                    <p class="content-title pt-2 pb-2 mb-0">ご予約内容</p>
                </div>
            </div>
            <div class="row">
                <div class="col-12 p-0">
                    <div class="content-item-area p-2">
                        <div class="content-item-title-area d-flex align-items-center mb-1">
                            <p class="content-item-title mb-0">会場</p>
                        </div>
                        <p class="content-item-description end-place-text me-5 mb-0"></p>
                    </div>
                    <div class="content-item-area p-2">
                        <div class="content-item-title-area d-flex align-items-center mb-1">
                            <p class="content-item-title mb-0">コース</p>
                        </div>
                        <p class="content-item-description end-course-text me-5 mb-0"></p>
                    </div>
                    <div class="content-item-area p-2">
                        <div class="content-item-title-area d-flex align-items-center mb-1">
                            <p class="content-item-title mb-0">日時</p>
                        </div>
                        <p class="content-item-description end-date-text me-5 mb-0"></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="button-area mb-3">
            <div class="row">
                <div class="col-12 text-center p-0">
                    <button type="button" class="btn close-button">トーク画面に戻る</button>
                </div>
            </div>
        </div>
    </div>
    <div class="error-area d-none">
        <div class="row mt-5">
            <div class="col-12 text-center">
                <p class="fw-bold mb-3" style="color: red; font-size: 18px;">既に予約完了しております。</p>
                <p class="fw-bold mb-5" style="font-size: 18px;">修正や質問などある場合はメッセージにてご相談ください。</p>
                <button type="button" class="btn close-button">トーク画面に戻る</button>
            </div>
        </div>
    </div>
    <div class="loader-area d-flex align-items-center position-absolute text-center d-none" style="opacity: 0">
        <div class="table-loader spinner-border">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="h5 fw-bold ms-3 mb-0">Loading...</p>
    </div>
{% endblock %}

{% block js %}
    <script src="{% static 'js/line/reserve.js' %}" type="module"></script>
    <script src="{% static 'js/line/reserve/place.js' %}" type="module"></script>
    <script src="{% static 'js/line/reserve/course.js' %}" type="module"></script>
    <script src="{% static 'js/line/reserve/date.js' %}" type="module"></script>
    <script src="{% static 'js/line/reserve/question.js' %}" type="module"></script>
    <script src="{% static 'js/line/reserve/check.js' %}" type="module"></script>
    <script src="{% static 'js/line/reserve/drop.js' %}" type="module"></script>
{% endblock %}